# language=SQL
Expense.findBudgetOverrunsWithinDateRange=\
      SELECT e.user_id \
           , :budgetLimit - SUM(e.amount) AS "amount" \
        FROM expenses e \
    GROUP BY e.user_id \
           , e.date \
      HAVING e.user_id NOT IN (:userIdsToSkip) \
         AND e.date_time BETWEEN :startDate AND :endDate \
         AND :budgetLimit - SUM(e.amount) < 0.00
